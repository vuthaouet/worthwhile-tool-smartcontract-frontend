{"ast":null,"code":"var _jsxFileName = \"/home/vuthaouet/blockchain/worthwhile-tool-smartcontract-frontend/src/api/upload.js\";\nimport React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css';\nimport '../index.css';\nimport { Pie, measureTextWidth } from '@antv/g2plot';\nimport { Form, Select, InputNumber, Switch, Radio, Slider, Button, Upload, Rate, Checkbox, Row, Col, Input } from 'antd';\nimport { InboxOutlined } from '@ant-design/icons';\nimport { Option } from \"antd/es/mentions\";\nimport axios from \"axios\";\nimport { combine_results_api, uploadfile, wortwhile } from \"./wortwhile\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst backend_folder = \"/home/vuthaouet/blockchain/worthwhile-tool-smartcontract-backend/data/\";\nconst baseUrl = \"http://localhost:5000\";\nconst formItemLayout = {\n  labelCol: {\n    span: 6\n  },\n  wrapperCol: {\n    span: 14\n  }\n};\n\nconst normFile = e => {\n  console.log('Upload event:', e);\n\n  if (Array.isArray(e)) {\n    return e;\n  }\n\n  return e && e.fileList;\n};\n\nfunction renderStatistic(containerWidth, text, style) {\n  const {\n    width: textWidth,\n    height: textHeight\n  } = measureTextWidth(text, style);\n  const R = containerWidth / 2; // r^2 = (w / 2)^2 + (h - offsetY)^2\n\n  let scale = 1;\n\n  if (containerWidth < textWidth) {\n    scale = Math.min(Math.sqrt(Math.abs(Math.pow(R, 2) / (Math.pow(textWidth / 2, 2) + Math.pow(textHeight, 2)))), 1);\n  }\n\n  const textStyleStr = `width:${containerWidth}px;`;\n  return `<div style=\"${textStyleStr};font-size:${scale}em;line-height:${scale < 1 ? 1 : 'inherit'};\">${text}</div>`;\n}\n\nasync function submitForm(values) {\n  let data_static = {};\n  data_static[\"sourceLanguage\"] = \"\";\n  data_static[\"list_contract\"] = [];\n  data_static[\"count_risk_of_false_positives\"] = 0;\n  data_static[\"count_leve_vulnerabilities\"] = {};\n  data_static[\"count_vulnerabilities\"] = {};\n  const formData = new FormData();\n  formData.append(\"type\", values['type']);\n  formData.append(\"project_name\", values[\"project_name\"]);\n  formData.append(\"list_tool\", values[\"list_tool\"]);\n  const data = {\n    type: values['type'],\n    project_name: values[\"project_name\"]\n  };\n  values[\"file\"].map(file => {\n    formData.append(\"file\", file.originFileObj); // data.file (\"file\", file.originFileObj);\n  });\n  console.log(\"formData.values()\");\n  console.log(...formData);\n  let check = uploadfile(formData);\n  let res = await axios.post(`${baseUrl}${'/wortwhile/uploadfile'}`, formData).then(res => {\n    return {\n      success: true,\n      data: res.data\n    };\n  }).catch(err => alert(\"File Upload Error\"));\n\n  if (res) {\n    console.log(res);\n    let check = await wortwhile(res.data);\n\n    if (check) {\n      let data_static = await combine_results_api(values[\"project_name\"]);\n      return data_static.data;\n    }\n  }\n\n  return data_static;\n}\n\nfunction renderChart(idElement, data, color_data) {\n  const piePlot = new Pie(idElement, {\n    appendPadding: 10,\n    data,\n    angleField: 'value',\n    colorField: 'type',\n    radius: 1,\n    innerRadius: 0.64,\n    meta: {\n      value: {\n        formatter: v => `${v}`\n      }\n    },\n    label: {\n      type: 'inner',\n      offset: '-50%',\n      style: {\n        textAlign: 'center'\n      },\n      autoRotate: false,\n      content: '{value}'\n    },\n    statistic: {\n      title: {\n        offsetY: -4,\n        customHtml: (container, view, datum) => {\n          const {\n            width,\n            height\n          } = container.getBoundingClientRect();\n          const d = Math.sqrt(Math.pow(width / 2, 2) + Math.pow(height / 2, 2));\n          const text = datum ? datum.type : 'Tổng';\n          return renderStatistic(d, text, {\n            fontSize: 28\n          });\n        }\n      },\n      content: {\n        offsetY: 4,\n        style: {\n          fontSize: '32px'\n        },\n        customHtml: (container, view, datum, data) => {\n          const {\n            width\n          } = container.getBoundingClientRect();\n          const text = datum ? ` ${datum.value}` : ` ${data.reduce((r, d) => r + d.value, 0)}`;\n          return renderStatistic(width, text, {\n            fontSize: 32\n          });\n        }\n      }\n    },\n    theme: {\n      colors10: color_data\n    },\n    interactions: [{\n      type: 'element-selected'\n    }, {\n      type: 'element-active'\n    }, {\n      type: 'pie-statistic-active'\n    }]\n  });\n  piePlot.render();\n}\n\nfunction results(values) {\n  console.log(\"results\");\n  console.log(values);\n  console.log(values[\"list_contract\"]);\n  console.log(values[\"count_vulnerabilities\"]); // let vulnerabilities = JSON.stringify(values[\"count_vulnerabilities\"])\n  // let leve_vulnerabilities = JSON.stringify(values[\"count_leve_vulnerabilities\"])\n\n  const element = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Synthesis Results\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"text1_results\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"List smart contract: \", values[\"list_contract\"], \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Source Language: \", values[\"sourceLanguage\"], \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"text2_results\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Date: \", new Date().toLocaleString(), \":\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: `${baseUrl}${\"/dowloadFile\"}`,\n        download: true,\n        children: \"Click to download synthesis results\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 9\n  }, this);\n\n  const data = [{\n    type: 'error',\n    value: values[\"count_leve_vulnerabilities\"][\"error\"]\n  }, {\n    type: 'none',\n    value: values[\"count_leve_vulnerabilities\"][\"none\"]\n  }, {\n    type: 'note',\n    value: values[\"count_leve_vulnerabilities\"][\"note\"]\n  }, {\n    type: 'warning',\n    value: values[\"count_leve_vulnerabilities\"][\"warning\"]\n  }];\n  let i;\n  let data_vaul = [];\n  let count = 0;\n\n  for (i = 0; i < values[\"list_vulnerabilities\"].length; i++) {\n    let vaul = values[\"list_vulnerabilities\"][i];\n    let vaul_type;\n\n    switch (vaul) {\n      case \"ReentrancyVulnerability\":\n        vaul_type = \"Reentrancy\";\n        break;\n\n      case \"ArithmeticVulnerability\":\n        vaul_type = \"Arithmetic\";\n        break;\n\n      case \"AccessControlVulnerability\":\n        vaul_type = \"Access control\";\n        break;\n\n      case \"UncheckedLowCallsVulnerability\":\n        vaul_type = \"Unchecked\";\n        break;\n\n      case \"DenialServiceVulnerability\":\n        vaul_type = \"Denial Service\";\n        break;\n\n      case \"TimeManipulationVulnerability\":\n        vaul_type = \"Time Manipulation\";\n        break;\n\n      case \"IgnoreVulnerability\":\n        vaul_type = \"Ignore\";\n        break;\n\n      case \"OtherVulnerability\":\n        vaul_type = \"Other\";\n        break;\n\n      case \"FrontRunningVulnerability\":\n        vaul_type = \"Front Running\";\n        break;\n    }\n\n    count = count + values[\"count_vulnerabilities\"][vaul];\n    data_vaul.push({\n      type: vaul_type,\n      value: values[\"count_vulnerabilities\"][vaul]\n    });\n  }\n\n  const data_rick = [{\n    type: 'RiskOfFalsePositives',\n    value: values[\"count_risk_of_false_positives\"]\n  }, {\n    type: 'Vulnerabilities',\n    value: count - values[\"count_risk_of_false_positives\"]\n  }]; // let color_data;\n\n  let color_data_leve = ['#FF6B3B', '#082f81', '#6494f9', '#FFC100'];\n  let color_data_vul = ['#025DF4', '#DB6BCF', '#2498D1', '#BBBDE6', '#4045B2', '#21A97A', '#FF745A', '#007E99', '#FFA8A8', '#2391FF'];\n  ReactDOM.render(element, document.getElementById('results'));\n  renderChart('results-leve', data, color_data_leve);\n  renderChart('results-vulnerabilities', data_vaul, color_data_vul);\n  renderChart('results-rick', data_rick, color_data_vul);\n}\n\nclass MyUpload extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loadings: []\n    };\n\n    this.handleUpload = ({\n      fileList\n    }) => {\n      console.log(\"vào handleUpload\"); //---------------^^^^^----------------\n      // this is equivalent to your \"const img = event.target.files[0]\"\n      // here, antd is giving you an array of files, just like event.target.files\n      // but the structure is a bit different that the original file\n      // the original file is located at the `originFileObj` key of each of this files\n      // so `event.target.files[0]` is actually fileList[0].originFileObj\n\n      console.log('fileList', fileList); // you store them in state, so that you can make a http req with them later\n\n      this.setState({\n        fileList\n      });\n    };\n\n    this.onFinish = async values => {\n      console.log(\"onFinish\");\n      console.log(values);\n      console.log(\"vào onFinish\"); // this.handleSubmit\n\n      let data_static = await submitForm(values);\n      this.setState(({\n        loadings\n      }) => {\n        const newLoadings = [...loadings];\n        newLoadings[2] = false;\n        return {\n          loadings: newLoadings\n        };\n      }); // let data_static =[]\n\n      results(data_static);\n    };\n\n    this.enterLoading = index => {\n      this.setState(({\n        loadings\n      }) => {\n        const newLoadings = [...loadings];\n        newLoadings[index] = true;\n        return {\n          loadings: newLoadings\n        };\n      }); // setTimeout(() => {\n      //     this.setState(({ loadings }) => {\n      //         const newLoadings = [...loadings];\n      //         newLoadings[index] = false;\n      //\n      //         return {\n      //             loadings: newLoadings,\n      //         };\n      //     });\n      // }, 12000);\n    };\n  }\n\n  render() {\n    const {\n      loadings\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Form, {\n        name: \"validate_other\",\n        ...formItemLayout,\n        onFinish: this.onFinish,\n        enctype: \"multipart/form-data\" // onSubmit={this.handleSubmit}\n        ,\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, { ...formItemLayout,\n          name: \"project_name\",\n          label: \"Your project name\",\n          rules: [{\n            required: true,\n            message: 'Please input your project name'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"Please input your project name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"list_tool\",\n          label: \"Tool\",\n          rules: [{\n            required: true,\n            message: 'Please choose tool'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Checkbox.Group, {\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                span: 4,\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  value: \"mythril\",\n                  style: {\n                    lineHeight: '32px'\n                  },\n                  children: \"Mythril\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                span: 8,\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  value: \"slither\",\n                  style: {\n                    lineHeight: '32px'\n                  },\n                  children: \"Slither\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                span: 8,\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  value: \"oyente\",\n                  style: {\n                    lineHeight: '32px'\n                  },\n                  children: \"Oyente\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                span: 8,\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  value: \"honeybadger\",\n                  style: {\n                    lineHeight: '32px'\n                  },\n                  children: \"Honeybadger\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"type\",\n          label: \"type\",\n          hasFeedback: true,\n          rules: [{\n            required: true,\n            message: 'Please input your type'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            placeholder: \"Please input your type\",\n            children: [/*#__PURE__*/_jsxDEV(Option, {\n              value: \"file\",\n              children: \"File\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Option, {\n              value: \"repo\",\n              children: \"Repo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, { ...formItemLayout,\n          name: \"linkRepo\",\n          label: \"Link Repo\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"Please input link repo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"file\",\n          children: /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"file\",\n            valuePropName: \"fileList\",\n            getValueFromEvent: normFile,\n            noStyle: true,\n            children: /*#__PURE__*/_jsxDEV(Upload.Dragger, {\n              name: \"files\",\n              beforeUpload: () => false,\n              fileList: normFile,\n              onChange: this.handleUpload,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"ant-upload-drag-icon\",\n                children: /*#__PURE__*/_jsxDEV(InboxOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"ant-upload-text\",\n                children: \"Click or drag file to this area to upload\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"ant-upload-hint\",\n                children: \"Support for a single or bulk upload.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          wrapperCol: {\n            span: 12,\n            offset: 6\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            loading: loadings[2],\n            onClick: () => this.enterLoading(2),\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"results\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"result_charts\",\n        style: {\n          display: '-webkit-box'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"results-leve\",\n          style: {\n            width: '30%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"results-vulnerabilities\",\n          style: {\n            width: '35%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"results-rick\",\n          style: {\n            width: '35%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"results-text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\n;\nexport default MyUpload;","map":{"version":3,"sources":["/home/vuthaouet/blockchain/worthwhile-tool-smartcontract-frontend/src/api/upload.js"],"names":["React","useState","ReactDOM","Pie","measureTextWidth","Form","Select","InputNumber","Switch","Radio","Slider","Button","Upload","Rate","Checkbox","Row","Col","Input","InboxOutlined","Option","axios","combine_results_api","uploadfile","wortwhile","backend_folder","baseUrl","formItemLayout","labelCol","span","wrapperCol","normFile","e","console","log","Array","isArray","fileList","renderStatistic","containerWidth","text","style","width","textWidth","height","textHeight","R","scale","Math","min","sqrt","abs","pow","textStyleStr","submitForm","values","data_static","formData","FormData","append","data","type","project_name","map","file","originFileObj","check","res","post","then","success","catch","err","alert","renderChart","idElement","color_data","piePlot","appendPadding","angleField","colorField","radius","innerRadius","meta","value","formatter","v","label","offset","textAlign","autoRotate","content","statistic","title","offsetY","customHtml","container","view","datum","getBoundingClientRect","d","fontSize","reduce","r","theme","colors10","interactions","render","results","element","Date","toLocaleString","i","data_vaul","count","length","vaul","vaul_type","push","data_rick","color_data_leve","color_data_vul","document","getElementById","MyUpload","Component","state","loadings","handleUpload","setState","onFinish","newLoadings","enterLoading","index","required","message","lineHeight","display"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport ReactDOM from 'react-dom'\nimport 'antd/dist/antd.css';\nimport '../index.css';\nimport { Pie, measureTextWidth } from '@antv/g2plot';\nimport {\n    Form,\n    Select,\n    InputNumber,\n    Switch,\n    Radio,\n    Slider,\n    Button,\n    Upload,\n    Rate,\n    Checkbox,\n    Row,\n    Col, Input,\n} from 'antd';\n\nimport {InboxOutlined} from '@ant-design/icons';\nimport {Option} from \"antd/es/mentions\";\nimport axios from \"axios\";\nimport {combine_results_api, uploadfile, wortwhile} from \"./wortwhile\";\n\nconst backend_folder = \"/home/vuthaouet/blockchain/worthwhile-tool-smartcontract-backend/data/\"\nconst baseUrl = \"http://localhost:5000\";\nconst formItemLayout = {\n    labelCol: {\n        span: 6,\n    },\n    wrapperCol: {\n        span: 14,\n    },\n};\n\nconst normFile = (e) => {\n    console.log('Upload event:', e);\n\n    if (Array.isArray(e)) {\n        return e;\n    }\n\n    return e && e.fileList;\n};\nfunction renderStatistic(containerWidth, text, style) {\n    const { width: textWidth, height: textHeight } = measureTextWidth(text, style);\n    const R = containerWidth / 2;\n    // r^2 = (w / 2)^2 + (h - offsetY)^2\n    let scale = 1;\n    if (containerWidth < textWidth) {\n        scale = Math.min(Math.sqrt(Math.abs(Math.pow(R, 2) / (Math.pow(textWidth / 2, 2) + Math.pow(textHeight, 2)))), 1);\n    }\n    const textStyleStr = `width:${containerWidth}px;`;\n    return `<div style=\"${textStyleStr};font-size:${scale}em;line-height:${scale < 1 ? 1 : 'inherit'};\">${text}</div>`;\n}\n\nasync function submitForm(values) {\n\n    let data_static = {}\n    data_static[\"sourceLanguage\"] = \"\"\n    data_static[\"list_contract\"] = []\n    data_static[\"count_risk_of_false_positives\"] = 0\n    data_static[\"count_leve_vulnerabilities\"]= {}\n    data_static[\"count_vulnerabilities\"] = {}\n    const formData = new FormData();\n    formData.append(\"type\", values['type']);\n    formData.append(\"project_name\", values[\"project_name\"]);\n    formData.append(\"list_tool\", values[\"list_tool\"]);\n    const data = {\n        type: values['type'],\n        project_name: values[\"project_name\"]\n    }\n    values[\"file\"].map((file) => {\n        formData.append(\"file\", file.originFileObj);\n        // data.file (\"file\", file.originFileObj);\n    });\n    console.log(\"formData.values()\")\n    console.log(...formData)\n    let check = uploadfile(formData)\n    let res = await axios.post(`${baseUrl}${'/wortwhile/uploadfile'}`, formData)\n        .then((res) => {\n            return {\n                success: true,\n                data: res.data,\n            }\n        })\n        .catch((err) => alert(\"File Upload Error\"));\n    if (res) {\n        console.log(res)\n        let check = await wortwhile(res.data)\n        if (check){\n            let data_static = await combine_results_api(values[\"project_name\"])\n            return data_static.data\n        }\n\n    }\n\n    return data_static\n}\nfunction renderChart(idElement,data,color_data){\n    const piePlot = new Pie(idElement, {\n        appendPadding: 10,\n        data,\n        angleField: 'value',\n        colorField: 'type',\n        radius: 1,\n        innerRadius: 0.64,\n        meta: {\n            value: {\n                formatter: (v) => `${v}`,\n            },\n        },\n        label: {\n            type: 'inner',\n            offset: '-50%',\n            style: {\n                textAlign: 'center',\n            },\n            autoRotate: false,\n            content: '{value}',\n        },\n        statistic: {\n            title: {\n                offsetY: -4,\n                customHtml: (container, view, datum) => {\n                    const { width, height } = container.getBoundingClientRect();\n                    const d = Math.sqrt(Math.pow(width / 2, 2) + Math.pow(height / 2, 2));\n                    const text = datum ? datum.type : 'Tổng';\n                    return renderStatistic(d, text, { fontSize: 28 });\n                },\n            },\n            content: {\n                offsetY: 4,\n                style: {\n                    fontSize: '32px',\n                },\n                customHtml: (container, view, datum, data) => {\n                    const { width } = container.getBoundingClientRect();\n\n                    const text = datum ? ` ${datum.value}` : ` ${data.reduce((r, d) => r + d.value, 0)}`;\n                    return renderStatistic(width, text, { fontSize: 32 });\n                },\n            },\n        },\n        theme: {\n            colors10: color_data\n        },\n        interactions: [{ type: 'element-selected' }, { type: 'element-active' }, { type: 'pie-statistic-active' }],\n    });\n\n    piePlot.render();\n}\n\nfunction results(values) {\n    console.log(\"results\")\n    console.log(values)\n    console.log(values[\"list_contract\"])\n    console.log(values[\"count_vulnerabilities\"])\n    // let vulnerabilities = JSON.stringify(values[\"count_vulnerabilities\"])\n    // let leve_vulnerabilities = JSON.stringify(values[\"count_leve_vulnerabilities\"])\n    const element = (\n        <div>\n            <h1>Synthesis Results</h1>\n            <div id={\"text1_results\"}>\n            <h2>List smart contract: {values[\"list_contract\"]}.</h2>\n            <h2>Source Language: {values[\"sourceLanguage\"]}.</h2>\n            {/*<h2>Number rick of false positives: {values[\"count_risk_of_false_positives\"]}.</h2>*/}\n            {/*<h2>List vulnerabilities: {vulnerabilities}.</h2>*/}\n            {/*<h2>List leve vulnerabilities: {leve_vulnerabilities}.</h2>*/}\n            </div>\n            <div id={\"text2_results\"}>\n            <p>Date: {new Date().toLocaleString()}:</p>\n            <a href={`${baseUrl}${\"/dowloadFile\"}`} download>Click to download synthesis results</a>\n            </div>\n        </div>\n    );\n    const data = [\n        { type: 'error', value: values[\"count_leve_vulnerabilities\"][\"error\"] },\n        { type: 'none', value: values[\"count_leve_vulnerabilities\"][\"none\"] },\n        { type: 'note', value: values[\"count_leve_vulnerabilities\"][\"note\"] },\n        { type: 'warning',value:  values[\"count_leve_vulnerabilities\"][\"warning\"]  },\n    ];\n    let i;\n    let data_vaul = []\n    let count = 0\n    for(i=0; i < values[\"list_vulnerabilities\"].length;i++){\n        let vaul = values[\"list_vulnerabilities\"][i]\n        let vaul_type;\n        switch (vaul) {\n            case \"ReentrancyVulnerability\":\n                vaul_type = \"Reentrancy\";\n                break;\n            case \"ArithmeticVulnerability\":\n                vaul_type = \"Arithmetic\";\n                break;\n            case \"AccessControlVulnerability\":\n                vaul_type = \"Access control\";\n                break;\n            case \"UncheckedLowCallsVulnerability\":\n                vaul_type = \"Unchecked\";\n                break;\n            case \"DenialServiceVulnerability\":\n                vaul_type = \"Denial Service\";\n                break;\n            case \"TimeManipulationVulnerability\":\n                vaul_type = \"Time Manipulation\";\n                break;\n            case \"IgnoreVulnerability\":\n                vaul_type = \"Ignore\";\n                break;\n            case \"OtherVulnerability\":\n                vaul_type = \"Other\";\n                break;\n            case \"FrontRunningVulnerability\":\n                vaul_type = \"Front Running\";\n                break;\n        }\n        count = count + values[\"count_vulnerabilities\"][vaul]\n        data_vaul.push({type: vaul_type ,value:  values[\"count_vulnerabilities\"][vaul] })\n    }\n\n    const data_rick = [\n        { type: 'RiskOfFalsePositives', value: values[\"count_risk_of_false_positives\"] },\n        { type: 'Vulnerabilities', value: count - values[\"count_risk_of_false_positives\"]},\n    ];\n    // let color_data;\n    let color_data_leve = [\n        '#FF6B3B',\n        '#082f81',\n        '#6494f9',\n        '#FFC100'\n    ]\n    let color_data_vul = ['#025DF4','#DB6BCF','#2498D1','#BBBDE6','#4045B2','#21A97A','#FF745A','#007E99','#FFA8A8','#2391FF']\n    ReactDOM.render(element, document.getElementById('results'));\n    renderChart('results-leve',data,color_data_leve)\n    renderChart('results-vulnerabilities',data_vaul,color_data_vul)\n    renderChart('results-rick',data_rick,color_data_vul)\n\n\n\n\n}\n\nclass MyUpload extends React.Component {\n    state = {\n        loadings: [],\n    };\n\n    handleUpload = ({fileList}) => {\n        console.log(\"vào handleUpload\")\n        //---------------^^^^^----------------\n        // this is equivalent to your \"const img = event.target.files[0]\"\n        // here, antd is giving you an array of files, just like event.target.files\n        // but the structure is a bit different that the original file\n        // the original file is located at the `originFileObj` key of each of this files\n        // so `event.target.files[0]` is actually fileList[0].originFileObj\n        console.log('fileList', fileList);\n\n        // you store them in state, so that you can make a http req with them later\n        this.setState({fileList});\n    };\n    onFinish = async (values) => {\n        console.log(\"onFinish\")\n        console.log(values)\n        console.log(\"vào onFinish\")\n        // this.handleSubmit\n        let data_static = await submitForm(values)\n        this.setState(({loadings}) => {\n            const newLoadings = [...loadings];\n            newLoadings[2] = false;\n\n            return {\n                loadings: newLoadings,\n            };\n        });\n        // let data_static =[]\n        results(data_static)\n    };\n    enterLoading = index => {\n        this.setState(({loadings}) => {\n            const newLoadings = [...loadings];\n            newLoadings[index] = true;\n\n            return {\n                loadings: newLoadings,\n            };\n        });\n        // setTimeout(() => {\n        //     this.setState(({ loadings }) => {\n        //         const newLoadings = [...loadings];\n        //         newLoadings[index] = false;\n        //\n        //         return {\n        //             loadings: newLoadings,\n        //         };\n        //     });\n        // }, 12000);\n    };\n\n    render() {\n        const {loadings} = this.state;\n        return (\n            <div>\n                <Form\n                    name=\"validate_other\"\n                    {...formItemLayout}\n                    onFinish={this.onFinish}\n                    enctype=\"multipart/form-data\"\n                    // onSubmit={this.handleSubmit}\n\n                >\n                    <Form.Item\n                        {...formItemLayout}\n                        name=\"project_name\"\n                        label=\"Your project name\"\n                        rules={[\n                            {\n                                required: true,\n                                message: 'Please input your project name',\n                            },\n                        ]}\n                    >\n                        <Input placeholder=\"Please input your project name\"/>\n                    </Form.Item>\n                    <Form.Item name=\"list_tool\" label=\"Tool\"\n                               rules={[\n                                   {\n                                       required: true,\n                                       message: 'Please choose tool',\n                                   },\n                               ]}>\n                        <Checkbox.Group>\n                            <Row>\n                                <Col span={4}>\n                                    <Checkbox\n                                        value=\"mythril\"\n                                        style={{\n                                            lineHeight: '32px',\n                                        }}\n                                    >\n                                        Mythril\n                                    </Checkbox>\n                                </Col>\n                                <Col span={8}>\n                                    <Checkbox\n                                        value=\"slither\"\n                                        style={{\n                                            lineHeight: '32px',\n                                        }}\n                                    >\n                                        Slither\n                                    </Checkbox>\n                                </Col>\n                                <Col span={8}>\n                                    <Checkbox\n                                        value=\"oyente\"\n                                        style={{\n                                            lineHeight: '32px',\n                                        }}\n                                    >\n                                        Oyente\n                                    </Checkbox>\n                                </Col>\n                                <Col span={8}>\n                                    <Checkbox\n                                        value=\"honeybadger\"\n                                        style={{\n                                            lineHeight: '32px',\n                                        }}\n                                    >\n                                        Honeybadger\n                                    </Checkbox>\n                                </Col>\n\n                            </Row>\n                        </Checkbox.Group>\n                    </Form.Item>\n                    <Form.Item\n                        name=\"type\"\n                        label=\"type\"\n                        hasFeedback\n                        rules={[\n                            {\n                                required: true,\n                                message: 'Please input your type',\n                            },\n                        ]}\n                    >\n                        <Select placeholder=\"Please input your type\">\n                            <Option value=\"file\">File</Option>\n                            <Option value=\"repo\">Repo</Option>\n                        </Select>\n                    </Form.Item>\n                    <Form.Item\n                        {...formItemLayout}\n                        name=\"linkRepo\"\n                        label=\"Link Repo\"\n                    >\n                        <Input placeholder=\"Please input link repo\"/>\n                    </Form.Item>\n                    <Form.Item label=\"file\">\n                        <Form.Item name=\"file\" valuePropName=\"fileList\" getValueFromEvent={normFile} noStyle>\n                            <Upload.Dragger name=\"files\" beforeUpload={() => false} fileList={normFile}\n                                            onChange={this.handleUpload}>\n                                <p className=\"ant-upload-drag-icon\">\n                                    <InboxOutlined/>\n                                </p>\n                                <p className=\"ant-upload-text\">Click or drag file to this area to upload</p>\n                                <p className=\"ant-upload-hint\">Support for a single or bulk upload.</p>\n                            </Upload.Dragger>\n                        </Form.Item>\n                    </Form.Item>\n\n                    <Form.Item\n                        wrapperCol={{\n                            span: 12,\n                            offset: 6,\n                        }}\n                    >\n                        <Button type=\"primary\" htmlType=\"submit\" loading={loadings[2]}\n                                onClick={() => this.enterLoading(2)}>\n                            Submit\n                        </Button>\n                    </Form.Item>\n                </Form>\n                <div id={\"results\"}/>\n                <div id={\"result_charts\"} style={{display: '-webkit-box'}}>\n                    <div id={\"results-leve\"} style={{\n                        width: '30%',}}\n                    />\n                    <div id={\"results-vulnerabilities\"}\n                         style={{width: '35%'}}\n                    />\n                    <div id={\"results-rick\"}\n                         style={{width: '35%'}}\n                    />\n                    <div id={\"results-text\"}\n                    />\n                </div>\n            </div>\n        );\n    }\n};\n\nexport default MyUpload"]},"metadata":{},"sourceType":"module"}